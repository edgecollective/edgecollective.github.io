
<!-- feed it through our cssmin filter to minify -->
<style>
  body{font-family:sans-serif;margin:20px;font-size:small;width:90%;margin-right:auto;margin-left:auto;padding-top:15px}#profile_pic{float:right;margin:0 0 1em 1em}h1{line-height:1em;font-size:x-large;margin-bottom:.31em}h2{font-size:large;margin-bottom:1px}h3{font-size:small;margin-bottom:1px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding-right:20px}.post .post-contents{background:#f7f7f7;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}.post .text{height:200px;padding:20px}@media (max-width:680px){.post{width:100%}}body{font:16px/1.5 sans-serif;font:16px}.img-with-caption{font-size:15px;text-align:center;margin:20 0;background-color:F1F1F1;padding:10px}#pullout{text-align:center}#intro{max-width:700px;display:inline-block;text-align:justify;text-justify:inter-word}#post-content{max-width:800px}#post-title{margin-bottom:1px;background-color:#eee;border:1px solid #999;display:block;padding:8px;width:max-content;font-size:40px;margin-right:40px;margin-bottom:5px}#profile_pic{float:right;margin:0 0 1em 1em}#main-title{line-height:1em;font-size:x-large;margin-bottom:.31em}h1{line-height:1em;font-size:30px;margin-bottom:.31em}h2{margin-bottom:1px;font-size:22px}h3{font-size:15px;margin-bottom:1px}ol,ul{max-width:650px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding:0 20px 20px 0}.contribute{width:100%;padding-top:10px}.post .post-contents{border-radius:10px;padding:20px 20px 10px 20px}.post .project-contents{background:#add8e6;border-radius:10px;padding:20px 20px 10px 20px}.post .project-updated{font-size:6px}.post .podcast-contents{background:#e9967a;border-radius:10px;padding:20px 20px 10px 20px}.post .note-contents{background:#e6e6fa;border-radius:10px;padding:20px 20px 10px 20px}.post .pedagogy-contents{background:#90ee90;border-radius:10px;padding:20px 20px 10px 20px}.post .talk-contents{background:pink;border-radius:10px;padding:20px 20px 10px 20px}.post .inter-contents{background:#add8e6;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}img{max-height:500px;max-width:100%}table{margin:30 auto 30 auto;padding:10px;text-align:left;border:1px solid #000}td{padding:10px;text-align:left;font-size:15}.post .text{min-height:250px;padding:5px}.post .inter-text{height:250px}audio{width:50%;height:50px}figure{font-size:20}@media (max-width:1100px){.post{width:100%}table{width:100%}}.video-container{position:relative;width:100%;padding-bottom:56.25%}.video{position:absolute;top:0;left:0;width:100%;height:100%;border:0}.frame{height:300px;width:100%;white-space:nowrap;text-align:center;margin:1em 0}.helper{display:inline-block;height:100%;vertical-align:middle}.present_img{background:#3a6f9a;vertical-align:middle;max-height:300}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/x-icon" href="/img/edge_favicon.png" />
    <title>UV Spectrophotometry</title>
    <meta name="description" content="Designing a DIY UV Spectrophotometer">
    <meta property="og:title" content="UV Spectrophotometry" />
    <!--<meta property="og:url" content="https://www.example.com/webpage/" /> -->
    <meta property="og:description" content="Designing a DIY UV Spectrophotometer" />
    <meta property="og:image" content="/img/uvf/uvf.png" />
    <link rel="image_src" href="/img/uvf/uvf.png"> 
  </head>
  <body>

    <div id='post-content'>

  <h3><a href="/">Edge Collective</a></h3>
    <h1>UV Spectrophotometry</h1>
    <i>Designing a DIY UV Spectrophotometer</i>
<hr>
        <!-- <h1>UV Spectrophotometry</h1> -->

  
  <h1>Quick links</h1>
<ul>
<li><a href="https://docs.google.com/document/d/1ZTH2Vkg3hWePBxur50EYWW4nV6wBEourCjJxaZh9Z6s/edit">Research Notes Google Document</a></li>
<li><a href="https://gitlab.com/edgecollective/uv-water">'uv-water' gitlab repo</a></li>
</ul>
<h1>Background</h1>
<p>Kearns et al have been working to develop lower-cost methods of testing that leverage a particular feature of biochar (and similar filters):  some contaminants adbsorb much more easily than others.  It turns out that the presence of one class of more weakly-adsorbed contaminants -- dissolved organic matter -- is relatively easy to assess with a lower-cost laboratory method:  UV spectrophotometry.</p>
<p>The details of this approach are laid out in a 2020 article by Kearns et al:</p>
<ul>
<li>&quot;Biochar Water Treatment for Control of Organic Micropollutants with UVA Surrogate Monitoring&quot; -- <a href="https://www.liebertpub.com/doi/full/10.1089/ees.2020.0173">https://www.liebertpub.com/doi/full/10.1089/ees.2020.0173</a> | <a href="https://www.liebertpub.com/doi/pdf/10.1089/ees.2020.0173">PDF</a> | <a href="/img/biochar/kearns-et-al-2021-biochar-water-treatment-for-control-of-organic-micropollutants-with-uva-surrogate-monitoring.pdf">local PDF</a></li>
</ul>
<p>And specific instructions for performing the UV absorbance test are laid out in the supplementary section, here:</p>
<ul>
<li>&quot;Supplementary data describing UV254 measurement&quot;: <a href="https://www.liebertpub.com/doi/suppl/10.1089/ees.2020.0173/suppl_file/Supp_Data.docx">docx</a> | <a href="/img/biochar/kearns_2021_uva_surrogate_supplement.pdf">pdf</a></li>
</ul>
<p>Further:  while commercial UV spectrophotometers used in such tests are usually over $2000, there are several designs available for DIY forms of the instrument, costing under $100 in parts.  We found one design to be particularly simple and well-characterized:</p>
<ul>
<li>&quot;An accurate, precise, and affordable light emitting diode spectrophotometer for drinking water and other testing with limited resources&quot; -- <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6988917/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6988917/</a></li>
</ul>
<p>Our aim is to build a working prototype of this UV spectrophotometer, compare its performance to similar commercial instruments used in a laboratory, and then see if such an instrument might be easy to build and use in a community workshop setting.</p>
<h1>Misc notes</h1>
<ul>
<li>
<p>Josh Kearns <a href="https://joshkearns.substack.com/p/new-paper-published-available-for">substack piece</a> on Kearns et. al, &quot;Leveraging DOM UV absorbance and fluorescence to accurately predict and monitor short-chain PFAS removal by fixed-bed carbon adsorbers&quot;</p>
</li>
<li>
<p>Analog Devices article by L. Orozco, <a href="https://www.analog.com/en/resources/analog-dialogue/articles/synchronous-detectors-facilitate-precision.html">&quot;Synchronous Detectors Facilitate Precision Low-Level Measurements&quot;</a></p>
</li>
<li>
<p><a href="https://electronics.stackexchange.com/questions/9510/how-do-i-model-an-led-with-spice">&quot;How do I model an LED with Spice?&quot;</a></p>
</li>
<li>
<p><a href="https://wuyongzheng.github.io/diode-fitting/diode-fitting.html">Diode-fitting tool</a></p>
</li>
<li>
<p><a href="https://www.inolux-corp.com/datasheet/Inolux%20UV/IN-C35PPCTGU0_v1.0.pdf">IN-C35PPCTGU0 3535 UVC LED</a></p>
</li>
</ul>
<h1>Sun Mar  3 08:35:31 PM EST 2024</h1>
<h2>Building the circuit</h2>
<p><a href="https://wiki.analog.com/university/courses/electronics/text/chapter-4">Precision voltage to current converter</a></p>
<p>Adafruit 4-pin jumper cable <a href="https://www.adafruit.com/product/4936">here</a></p>
<p>Adafruit 4-pin jst ph stemma <a href="https://www.adafruit.com/product/3950?">here</a></p>
<p>Adafruit JST 4-pin jst ph stemma SMD <a href="https://www.adafruit.com/product/4392">here</a></p>
<ul>
<li>diagram <a href="https://cdn-shop.adafruit.com/product-files/4392/4392_C13927-001_CW2001-04T-H01-BD-A.PDF">here</a></li>
</ul>
<h1>Mon Mar 11 05:20:16 PM EDT 2024</h1>
<p>LED polarity <img src="/img/uvf/led_polarity.png" alt=""></p>
<p>uv detector IN-C35PPCTGU0</p>
<p>datasheet <a href="https://mm.digikey.com/Volume0/opasdata/d220001/medias/docus/318/SD008-2171-112.pdf">here</a></p>
<p>custom footprint:</p>
<p><img src="/img/uvf/custom_footprint.png" alt=""></p>
<p>emitter v_0.1 ordered 3/11/24</p>
<p><img src="/img/uvf/emitter_v0.1_3d.png" alt=""></p>
<p>detector v_0.1 ordered 3/12/24</p>
<p><img src="/img/uvf/uva_detect_v0.1_3d.png" alt=""></p>
<h1>Fri Mar 15 11:00:43 AM EDT 2024</h1>
<p><a href="https://www.instructables.com/Two-circuits-of-switched-mode-power-supply-based-o/">instructrable on 555 as switch mode supply</a></p>
<p><a href="/img/uvf/555_switcher_boost_circuit_1.bmp"><img src="/img/uvf/555_switcher_boost_circuit_1.bmp" alt=""></a></p>
<h1>Sat Mar 23 03:52:20 PM EDT 2024</h1>
<p>Solder mask goof-up on UV emitter part!</p>
<p><img src="/img/uvf/photo_1.png" alt=""></p>
<p><img src="/img/uvf/photo_2.png" alt=""></p>
<p><img src="/img/uvf/photo_3.png" alt=""></p>
<p>Reference for UV emitter <a href="https://www.digikey.com/en/products/detail/inolux/IN-C35PPCTGU0/16965314?s=N4IgjCBcoCwAxVAYygMwIYBsDOBTANCAPZQDaIMArAOxxzUgC6hADgC5QgDKbATgJYA7AOYgAvmMIAmMiCEBaJAGZKLFkjajGYoA">IN-C35PPCTGU0</a></p>
<p>Also: two pins on Q1 on emitter are 'flipped' -- need to fix pins -- was able to solder 'upside-down' anyway to fix</p>
<h1>Mon Mar 25 08:17:39 PM EDT 2024</h1>
<p>Made a quick 3d enclosure using openscad:</p>
<p>openscad and stl files are <a href="https://gitlab.com/edgecollective/uv-water/-/tree/1164b3f61c16f32ebf238acea9b2f93215b57da2/enclosure/openscad">here</a></p>
<p><img src="/img/uvf/uvf_enc_1.png" alt=""></p>
<p><img src="/img/uvf/uvf_enc_2.png" alt=""></p>
<p><img src="/img/uvf/uvf_enc_cover.png" alt=""></p>
<h1>Fri Mar 29 08:57:08 PM EDT 2024</h1>
<p>Water filtering, 1 micron</p>
<p>Selection at McMaster <a href="https://www.mcmaster.com/products/~/removes-particle-size-down-to~less-than~50~%CE%BCm/removes-particle-size-down-to~less-than~50~%CE%BCm/removes-particle-size-down-to~less-than~50~%CE%BCm/filter-cartridges-for-reducing-rust-particles-and-sediment-in-water-9/">here</a></p>
<p>Nice pairing on Amazon:</p>
<ul>
<li>filter housing <a href="https://www.amazon.com/Transparent-Standard-Filtration-Mounting-Hardware/dp/B01N4RFXGS">here</a></li>
<li>filter <a href="https://www.amazon.com/Cartridges-Filtration-Polypropylene-WELL-MATCHED-WFPFC5002/dp/B07ZHN8KMM">here</a></li>
</ul>
<h2>Most recent prototype</h2>
<p><img src="/img/uvf/uvf_mike_proto_a.jpg" alt=""></p>
<p><img src="/img/uvf/uvf_mike_proto.jpg" alt=""></p>
<h1>Fri Apr  5 08:31:52 PM EDT 2024</h1>
<p>Working on detector v_0.2 ...</p>
<p>Sub-schematic that will be moved to a 'control board':</p>
<p><img src="/img/uvf/blue_led_voltage_ref.png" alt=""></p>
<p>Version 0.1 footprint assignments:</p>
<p><img src="/img/uvf/footprints_detector_ver_0.1.png" alt=""></p>
<p>Version 0.1 pinout:</p>
<p><img src="/img/uvf/detect_v_0.1_pinout.png" alt=""></p>
<p>(need to add 2.5V ref)</p>
<p><img src="/img/uvf/v_0.2_board_draft.png" alt=""></p>
<h1>Fri Apr  5 11:01:04 PM EDT 2024</h1>
<h2>Detector schematic:</h2>
<p><a href="/img/uvf/UV-Detector-v0.2.pdf"><img src="/img/uvf/uv_ver0.2_detector_schem.png" alt=""></a></p>
<h2>Emitter schematic:</h2>
<p><a href="/img/uvf/UV-LED-source.pdf"><img src="/img/uvf/uv_emitter_v0.1_schem.png" alt=""></a></p>
<hr>
<h1>Revision 0.2 of emitter and detector</h1>
<h3>Sat Apr  6 10:25:06 PM EDT 2024</h3>
<p>Edited footprint for LED (remove solder mask from center pad)</p>
<p>Revising mosfet pin assignment on emitter ...</p>
<p><a href="https://rocelec.widen.net/view/pdf/orqxwkxkq1/ONSM-S-A0003544006-1.pdf?t.download=true&amp;u=5oefqw">2N7000 datasheet</a></p>
<p>2N7000 pinout:</p>
<p><img src="/img/uvf/2N7000.png" alt=""></p>
<hr>
<h1>emitter ver 0.2</h1>
<h3>Sat Apr  6 10:22:42 PM EDT 2024</h3>
<h2>board layout:</h2>
<p><img src="/img/uvf/uva_emitter_v0.2-board.png" alt=""></p>
<h2>schematic:</h2>
<p><a href="/img/uvf/UV-LED-source.pdf"><img src="/img/uvf/uva-emitter-v0.2-schematic.png" alt=""></a>)</p>
<h2>board files:</h2>
<ul>
<li><a href="https://gitlab.com/edgecollective/uv-water/-/archive/01dbf736686276510b7202d938a0762d491ce514/uv-water-01dbf736686276510b7202d938a0762d491ce514.zip?path=uv-water-sensor/UV-LED-source/v_0.2">emitter ver 0.2 kicad files, JLCPCB order April 6 2024</a></li>
</ul>
<hr>
<h1>detector ver 0.2</h1>
<h3>Sat Apr  6 10:22:55 PM EDT 2024</h3>
<h2>board layout:</h2>
<p><img src="/img/uvf/uva-detector-v0.2-board.png" alt=""></p>
<h2>schematic:</h2>
<p><a href="/img/uvf/UV-Detector-v0.2.pdf"><img src="/img/uvf/uv_detector_ver_0.2_schematic.png" alt=""></a>)</p>
<h2>board files:</h2>
<ul>
<li><a href="https://gitlab.com/edgecollective/uv-water/-/archive/01dbf736686276510b7202d938a0762d491ce514/uv-water-01dbf736686276510b7202d938a0762d491ce514.zip?path=uv-water-sensor/UV-Detector/v_0.2">detector ver 0.2 kicad files, JLCPCB order April 7 2024</a></li>
</ul>
<h1>Mon Apr 15 08:18:11 PM EDT 2024</h1>
<p>Collecting water samples and filtering through 1 um filter ...</p>
<p>3/4&quot; NPT male + 3/4&quot; barb fitting <a href="https://www.amazon.com/JUWO-Barb-Brass-Fitting-1-Pack/dp/B0BNPT7HNQ">on Amazon</a></p>
<p>electric water transfer pump <a href="https://www.amazon.com/Water-Transfer-Pump-DEKOPRO-Electric/dp/B0CB64B8CF">on Amazon</a></p>
<p>calibration of total organic carbon / uv254, EPA document <a href="https://cfpub.epa.gov/si/si_public_file_download.cfm?p_download_id=525073&amp;Lab=NERL">pdf</a></p>
<p><a href="https://www.photonicmeasurements.com/go-the-uv254-monitor-">uva254 go</a></p>
<p>'request a quote' for uva254 go <a href="https://www.labunlimited.com/s/ALL/6-UV254GO-UVTA/Photonic-UV254-Go!-Handheld-UVT-UVA-Analyser">here</a></p>
<p>might want to search for 'total organic carbon' (TOC)</p>
<p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9112109/">An easy spectrophotometric acid-base titration protocol for dissolved organic matter</a></p>
<p>correlating uv254 to TOC, BOD, and COD <a href="https://www.youtube.com/watch?v=gqqIAzbyQjM">video</a></p>
<p>Great paper on UV254 methods and applications.  Note: correlations between uv254 and disinfection byproducts! references <a href="https://downloads.regulations.gov/EPA-HQ-OW-2014-0408-0008/content.pdf">here</a></p>
<h1>Mon Apr 29 09:29:59 PM EDT 2024</h1>
<p><a href="https://chem.libretexts.org/Bookshelves/General_Chemistry/Book%3A_Structure_and_Reactivity_in_Organic_Biological_and_Inorganic_Chemistry_(Schaller)/Structure_and_Reactivity_in_Organic_Biological_and_Inorganic_Chemistry_II%3A_Practical_Aspects_of_Structure_-_Purification_and_Spectroscopy/02%3A_Ultraviolet-Visible_Spectroscopy/2.03%3A_UV-Visible_Spectroscopy_of_Organic_Compounds">UV-Vis spec of Organic Compounds</a></p>
<p><a href="https://edu.rsc.org/resources/students-resource-uv-/-visible-spectroscopy/282.article#:~:text=UV%2Dvisible%20spectroscopy%20is%20a,a%20mechanism%20can%20be%20proposed.">UV-Vis spec, student resources</a></p>
<p><a href="https://www.intechopen.com/chapters/78677">Nice chapter on uv absorbance</a></p>
<p><a href="https://www2.chemistry.msu.edu/faculty/reusch/virttxtjml/spectrpy/uv-vis/spectrum.htm">Nice general reference on uv-vis spec</a></p>
<p><a href="https://chem.libretexts.org/Bookshelves/Organic_Chemistry/Map%3A_Organic_Chemistry_(Wade)_Complete_and_Semesters_I_and_II/Map%3A_Organic_Chemistry_(Wade)/16%3A_Conjugated_Systems_Orbital_Symmetry_and_Ultraviolet_Spectroscopy/16.10%3A_Interpreting_Ultraviolet_Spectra_-_The_Effect_of_Conjugation#:~:text=Molecules%20or%20parts%20of%20molecules,a%20%CF%80%20%2D%20%CF%80*%20transition.">Some UV-Vis chemistry examples</a></p>
<h1>Sun May  5 02:54:23 PM EDT 2024</h1>
<h2>Notes on testing v0.2</h2>
<p>idea: place all non-emitter/detector components on 'bottom' of board to allow easy access during testing</p>
<p>use voltage doubler on emitter board, as per this part <a href="https://www.analog.com/en/products/max1682.html">here</a></p>
<p>replace the 5K R15 on detector board with R15 = 619 ohms</p>
<p>add current sense breakout above R2 on emitter board</p>
<p>add 555 boost and 555 emitter input on external feather board</p>
<p>add usb socket to motherboard for power</p>
<pre><code>I was getting a measly 1.0V at the &quot;2V5&quot; reference pin - some buffoon (that is, me) seems to have chosen poorly the value of R15. I have replaced the 5K with a 619 Ohm resistor - and much better! I get 2.5Vreference.

And the signal at &quot;leak&quot; seems to act as I expected, in room light anyway. I still have to set up the LED and test a blank and wet cuvette ...

so, that T-network has a nice high gain!

And the input signal is 2.491 to 2.517 at 1kHz

Implies the equivalent feedback R is about 53.8Meg

There about 26nApp into the the stage with this test

So , 26mVpp into 1Meg for test current, and about 1.4Vpp output

Now to find what I did wrong at the LED stage ...

With 130us rise time that's about 2.7kHz tia bandwidth

Don't run the LED at 10kHz ..

OK I have a solid 0.5Vpp signal at &quot;leak&quot; node when I ping the LED board with 0V to 3V square wave at 500 Hz. On that emitter pcb I had to swap out R1 (was 49.9K) to 49.9 Ohms, and R2 (was 24.9K) to 24.9 Ohms. So, no cuvette, in the opto-mechanical system Craig designed, I see 0.5Vpp signal. Not bad.

less nice, I see some noise - I think that high gain TIA is also picking up 60Hz, and some other crap. more scope-ing to figure this out .... maybe we want a metal box ?
</code></pre>
<p><img src="/img/uvf/mike_test_v0.2.jpg" alt=""></p>
<p><img src="/img/uvf/craig_PD.jpg" alt=""></p>
<h1>Fri May 10 03:39:30 PM EDT 2024</h1>
<p><img src="/img/uvf/uvf_meeting_may10.png" alt=""></p>
<h1>Fri May 17 08:25:56 PM EDT 2024</h1>
<p>Version 0.2 of hardware does indeed work!</p>
<p>Input: 1 kHz square wave, 50% duty cycle, 3.3V pp</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="https://drive.google.com/file/d/1ddht_ipYdlvbi5xdmDQ5ARPbd5Wk6Hx-/view?usp=sharing"><img src="/img/uvf/initial_expt_cover.png" alt=""></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Video of initial test with cuvette filled with distilled water.  Interesting: voltage at DETECT slightly higher with liquid-filled cuvette than without any cuvette ... lens effect?</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/raw_battery_sag.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Raw battery sag is about 0.2V</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/urea_setup.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Test setup</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/leak_blocked.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LEAK blocked</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/leak_unblocked.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LEAK unblocked</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/rect_blocked.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">RECT blocked</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/rect_unblocked_ac.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">RECT unblocked</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/detect_blocked.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DETECT blocked</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/img/uvf/detect_unblocked.jpg" alt=""></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DETECT unblocked</td>
</tr>
</tbody>
</table>
<p><img src="/img/uvf/dilution.jpg" alt=""></p>
<h2>Initial 'linearity test' attempt using tannin powder</h2>
<p><img src="/img/uvf/tannin.jpg" alt=""></p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="https://drive.google.com/file/d/1vx4ERz3yq5KiWA97wVG02OwWjmjgoKUb/view?usp=sharing"><img src="/img/uvf/droplet_experiment_cover.png" alt=""></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Video of initial tannin test. Initial solution: 25 mg tannin powder in 5 mL of distilled water (this dropped DETECT signal to 'zero'); then diluted 5 mL of that solution into 25 mL of distilled water.</td>
</tr>
</tbody>
</table>
<h2>Next steps:</h2>
<ul>
<li>DC-DC boost noise reduction via 555-based circuit</li>
<li>test of linearity of circuit</li>
<li>555-based 1 kHz input</li>
<li>respin case to enhance internal light collimation</li>
<li>ground plane on board and 60 Hz shielding</li>
</ul>
<h1>Sun May 19 06:02:51 PM EDT 2024</h1>
<p>Similar platform: <a href="https://iorodeo.com/products/uv-open-colorimeter">https://iorodeo.com/products/uv-open-colorimeter</a></p>
<ul>
<li>colorimeter product guide: <a href="https://blog.iorodeo.com/open-colorimeter-product-guide/">https://blog.iorodeo.com/open-colorimeter-product-guide/</a></li>
<li>uv sensor board in particular <a href="https://iorodeo.com/products/as7331-uv-sensor-board?pr_prod_strat=e5_desc&amp;pr_rec_id=037acace2&amp;pr_rec_pid=7328730316915&amp;pr_ref_pid=7363616571507&amp;pr_seq=uniform">https://iorodeo.com/products/as7331-uv-sensor-board?pr_prod_strat=e5_desc&amp;pr_rec_id=037acace2&amp;pr_rec_pid=7328730316915&amp;pr_ref_pid=7363616571507&amp;pr_seq=uniform</a></li>
<li>current-controlled LED board <a href="https://github.com/iorodeo/i_control_led">https://github.com/iorodeo/i_control_led</a></li>
</ul>
<p>What would be required to make their system work for UV254?</p>
<h1>Sun May 26 01:51:00 PM EDT 2024</h1>
<h2>555-based boost circuit design</h2>
<p>Reference is circuit 1 from <a href="https://www.instructables.com/Two-circuits-of-switched-mode-power-supply-based-o/">this tutorial</a></p>
<p>Power mosfet IRF2907Z datasheet <a href="https://www.infineon.com/dgdl/Infineon-IRF2907Z-DataSheet-v01_01-EN.pdf?fileId=5546d462533600a4015355ded98f1902">here</a></p>
<p>op-amp is LT1716</p>
<p><a href="/img/uvf/555_switcher_boost_circuit_1.png"><img src="/img/uvf/555_switcher_boost_circuit_1.png" alt=""></a></p>
<p><img src="/img/uvf/555_pinout.webp" alt=""></p>
<h1>Sat Jun 15 03:28:33 PM EDT 2024</h1>
<p>generating a 500 hz signal on a feather m4 ...</p>
<p>start with silly blink example</p>
<p>.002 second delay ...</p>
<h1>Tue Jun 18 05:51:13 PM EDT 2024</h1>
<p>Great description of method for UV254 here: <a href="https://images.hach.com/asset-get.download.jsa?code=50588">https://images.hach.com/asset-get.download.jsa?code=50588</a></p>
<p>&quot;use a glass fiber filter with no organic binder&quot;</p>
<p>As well as here: <a href="https://assets.thermofisher.com/TFS-Assets/LPD/Application-Notes/an_uva_e_1020_rev_b_rev_web.pdf">https://assets.thermofisher.com/TFS-Assets/LPD/Application-Notes/an_uva_e_1020_rev_b_rev_web.pdf</a></p>
<p>Kearns et al methods suggest 1 um filter;
Looks from last link there that .45 um filters are also acceptable</p>
<p>Getting some good results here -- <a href="https://www.amazon.com/s?k=glass+fiber+syringe+filter&amp;i=industrial&amp;crid=3FR5VDYJW4RHQ&amp;sprefix=glass+fiber+syringe+filter%2Cindustrial%2C105&amp;ref=nb_sb_noss_1">https://www.amazon.com/s?k=glass+fiber+syringe+filter&amp;i=industrial&amp;crid=3FR5VDYJW4RHQ&amp;sprefix=glass+fiber+syringe+filter%2Cindustrial%2C105&amp;ref=nb_sb_noss_1</a></p>
<p>... need to figure out what diameter filter to try</p>
<h1>Fri Jun 28 02:33:07 PM EDT 2024</h1>
<p>Another 555 boost circuit <a href="https://circuitdigest.com/electronic-circuits/a-simple-boost-converter-circuit-using-555-timer-ic">here</a></p>
<p><a href="https://www.eevblog.com/forum/projects/555-timer-boost-converter-(and-buck-converter)-switching-power-regulator/">https://www.eevblog.com/forum/projects/555-timer-boost-converter-(and-buck-converter)-switching-power-regulator/</a></p>
<p>And yet another here: <a href="https://www.instructables.com/Simple-DC-DC-Boost-Converter-Using-555/">https://www.instructables.com/Simple-DC-DC-Boost-Converter-Using-555/</a></p>
<p><a href="https://www.researchgate.net/publication/359257240_DC_to_DC_Boost_Converter_using_555_Timer_IC">https://www.researchgate.net/publication/359257240_DC_to_DC_Boost_Converter_using_555_Timer_IC</a></p>
<p>From <a href="https://www.researchgate.net/figure/DC-to-DC-Boost-Converter-using-555-timer-IC-6-to-24_fig1_359257240">https://www.researchgate.net/figure/DC-to-DC-Boost-Converter-using-555-timer-IC-6-to-24_fig1_359257240</a> -- <img src="/img/uvf/dc_dc_555_boost.png" alt=""></p>
<p><img src="/img/uvf/simple_boost_555.png" alt=""> via <a href="https://www.youtube.com/watch?v=fuXH-cQjYwo">https://www.youtube.com/watch?v=fuXH-cQjYwo</a></p>
<p>also: <a href="https://how2electronics.com/dc-dc-converter-using-555-timer/">https://how2electronics.com/dc-dc-converter-using-555-timer/</a></p>
<p>simplest: <a href="https://www.circuits-diy.com/boost-converter-circuit-using-555-timer-ic/">https://www.circuits-diy.com/boost-converter-circuit-using-555-timer-ic/</a></p>
<p>555 oscillator circuit explained here: <a href="https://www.electronics-tutorials.ws/waveforms/555_oscillator.html">https://www.electronics-tutorials.ws/waveforms/555_oscillator.html</a></p>
<p>simplest 555 oscillator circuit <a href="https://www.555-timer-circuits.com/simplest-555-oscillator.html">https://www.555-timer-circuits.com/simplest-555-oscillator.html</a></p>
<p>good explanation of desgining a 555 oscillator: <a href="https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-555-timer#:~:text=mS,Niobium%20Oxide%20Capacitors">https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-555-timer#:~:text=mS,Niobium%20Oxide%20Capacitors</a></p>
<p>BCN547 reference <a href="https://components101.com/transistors/bc547-transistor-pinout-datasheet">https://components101.com/transistors/bc547-transistor-pinout-datasheet</a></p>
<h1>Sun Jun 30 05:40:21 PM EDT 2024</h1>
<p>Used this circuit to make a mostly 50% duty cycle oscillator: <a href="https://www.electronics-tutorials.ws/waveforms/555-circuits-part-1.html">https://www.electronics-tutorials.ws/waveforms/555-circuits-part-1.html</a> -- using the 'Simple 555 Oscillator' ... could improve by using diodes in lower circuits on that page ('exact 50% duty cycle'), but waiting on diode supply.  used R=5.5K, C=.1uF ... freq should be 1.3KHz, got more like 580 Hz.</p>
<p>Now going to try to build this: <a href="https://www.researchgate.net/profile/Muhammad-Ameer-Hamza-2/publication/359257240/figure/fig1/AS:1134177667817474@1647420436729/DC-to-DC-Boost-Converter-using-555-timer-IC-6-to-24.ppm">https://www.researchgate.net/profile/Muhammad-Ameer-Hamza-2/publication/359257240/figure/fig1/AS:1134177667817474@1647420436729/DC-to-DC-Boost-Converter-using-555-timer-IC-6-to-24.ppm</a></p>
<p>... or this: <a href="https://how2electronics.com/dc-dc-converter-using-555-timer/">https://how2electronics.com/dc-dc-converter-using-555-timer/https://how2electronics.com/dc-dc-converter-using-555-timer/</a></p>
<p>Review of 555 timer <a href="https://electronics.stackexchange.com/questions/152432/555-timer-boost-converter-doesnt-meet-spec">https://electronics.stackexchange.com/questions/152432/555-timer-boost-converter-doesnt-meet-spec</a></p>
<p>Flyback converter for dummies <a href="https://www.dos4ever.com/flyback/flyback.html">https://www.dos4ever.com/flyback/flyback.html</a> -- great explanation</p>
<p>Nice notes on 555 boost converters <a href="https://github.com/tardate/LittleArduinoProjects/blob/master/Electronics101/555Timer/NixiePowerSupply/README.md">https://github.com/tardate/LittleArduinoProjects/blob/master/Electronics101/555Timer/NixiePowerSupply/README.md</a></p>
<p>This instructable might be derivative <a href="https://www.instructables.com/High-Voltage-Power-Supply-for-Nixie-and-Valve-Tube/">https://www.instructables.com/High-Voltage-Power-Supply-for-Nixie-and-Valve-Tube/</a> -- with a better circuit to follow</p>
<p>Very clear circuit diagrams:</p>
<ul>
<li><a href="https://www.instructables.com/High-Voltage-Power-Supply-for-Nixie-and-Valve-Tube/">https://www.instructables.com/High-Voltage-Power-Supply-for-Nixie-and-Valve-Tube/</a></li>
<li><a href="https://github.com/tardate/LittleArduinoProjects/blob/master/Electronics101/555Timer/NixiePowerSupply/README.md">https://github.com/tardate/LittleArduinoProjects/blob/master/Electronics101/555Timer/NixiePowerSupply/README.md</a></li>
</ul>
<p>this seems like a very similar circuit <a href="https://www.eleccircuit.com/wp-content/uploads/2012/08/dc-to-dc-converter-using-ic-ne555.jpg">https://www.eleccircuit.com/wp-content/uploads/2012/08/dc-to-dc-converter-using-ic-ne555.jpg</a></p>
<p>problem -- if use single 555, the output voltage will drop as the battery voltage drops. using another 555 can compensate.  <a href="https://www.eevblog.com/forum/beginners/boost-converter-using-555/">https://www.eevblog.com/forum/beginners/boost-converter-using-555/</a></p>
<p>... unless, i think, there's some feedback mechanism -- which an op-amp, or another 555, can provide.</p>
<h1>Mon Jul  1 05:23:37 PM EDT 2024</h1>
<p>Might try the IRF740 as a power mosfet ... <a href="https://www.vishay.com/docs/91054/91054.pdf">https://www.vishay.com/docs/91054/91054.pdf</a></p>
<p>why / why not use an op-amp as a comparator?  nice app note: <a href="https://www.analog.com/media/en/technical-documentation/application-notes/an-849.pdf">https://www.analog.com/media/en/technical-documentation/application-notes/an-849.pdf</a></p>
<p>second circuit uses the BC557 PNP transistor <a href="https://www.mouser.com/datasheet/2/308/BC556BTA_D-2310029.pdf">https://www.mouser.com/datasheet/2/308/BC556BTA_D-2310029.pdf</a></p>
<p>trying the first circuit</p>
<p>using the tlv2462 as a comparator, datasheet <a href="https://www.ti.com/lit/ds/symlink/tlv2462.pdf?ts=1719855288428&amp;ref_url=https%253A%252F%252Fwww.ti.com%252Fproduct%252FTLV2462%253Fbm-verify%253DAAQAAAAJ_____7t_iiCZs2-0IXoUu_7mYbVf72gUi9_Ko-Vr6kyE7u3yaZwWkwcX_3-3XyM--l5cbybllQ09BX9Fosc2bSl5SVAUcYE8BgTvwibsRHt4BKdv4NuSec8KGih_O17wKTFpGevutg1ad4qYDMjPZtobhp5b2fbQ_4If76jp7igw1qe93F_nBcqs4jYqnXtlSvpIJPny889ZlSpN-7ylR0VzY-NkOYZutNP2wDUlyvxAzlIi2YEOAEdgT_3B1BaiT2L2jmYh6CH8_l4focJHkLdDmHthJ2MIVf5KYlvIosmgsWHE_nobYb7TyPBUOA">here</a></p>
<p><img src="/img/uvf/tlv2462_pinout.png" alt=""></p>
<p><img src="/img/uvf/irf740.png" alt=""></p>
<p>Post debug with Mike:</p>
<ul>
<li>
<p>replaced IRF29072 with IRF740</p>
</li>
<li>
<p>for voltage ref, replaced 1N750 with 1N4732A (4.7V) Zener  ... 4.7V was too close to 5V ... so then used 1N4727A (3V) Zener ... whatever voltage we generate via D1, implies proper value of voltage divider R6 &amp; R7 to get us to 7.5 Volts</p>
</li>
<li>
<p>Remove D3 &amp; D9</p>
</li>
<li>
<p>Place C3, but might not need to populate</p>
</li>
<li>
<p>replaced DFLS220L with IN5817</p>
</li>
<li>
<p>tested with 3 x 1K resistor load in parallel (replacing R5); still very smooth output, no droop</p>
</li>
</ul>
<h1>Tue Jul  2 05:26:31 PM EDT 2024</h1>
<p>LM358ADR digikey $0.40 <a href="https://www.digikey.com/en/products/detail/texas-instruments/LM358ADR/555540?utm_adgroup=&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=Pmax_Shopping_Boston%20Metro%20Category%20Awareness&amp;utm_term=&amp;utm_content=&amp;utm_id=go_cmp-20837509568_adg-_ad-__dev-c_ext-_prd-555540_sig-CjwKCAjwyo60BhBiEiwAHmVLJX4WQ_9Vm3RCA1vSrYdf1WwBZ7y5ZAuo139o7Uyq6VomeHFqisBuNhoC9SUQAvD_BwE&amp;gad_source=1&amp;gclid=CjwKCAjwyo60BhBiEiwAHmVLJX4WQ_9Vm3RCA1vSrYdf1WwBZ7y5ZAuo139o7Uyq6VomeHFqisBuNhoC9SUQAvD_BwE">here</a></p>
<p>Package: 8-SOIC (0.154&quot;, 3.90mm Width)</p>
<p>What input voltage is ideal for the LEDs?</p>
<p>Try to get to 7.5 volts ...</p>
<p>Okay ...</p>
<p>Got to 7.5 volts with the combination I have</p>
<p><img src="/img/uvf/555_input_555_boost.jpeg" alt=""></p>
<p>Replicated the basic setup with 555 timer input</p>
<p><img src="/img/uvf/555_50_50.png" alt=""></p>
<p><img src="/img/uvf/noisy_555_pwm.jpeg" alt=""></p>
<p>Reference: see &quot;555 Circuits Part 1 – An Improved Duty Cycle&quot; ,  at <a href="https://www.electronics-tutorials.ws/waveforms/555-circuits-part-1.html">https://www.electronics-tutorials.ws/waveforms/555-circuits-part-1.html</a></p>
<p>Used:  NE555 timer, RA = RB = 5.5K; C = 0.1 uF;  got freq of 1.15 kHz;   used 100 nF from pin 5 to ground</p>
<p>555 output was a little noisy / shaky, not sure whether that's important / something to address.</p>
<p>1.15 kHz seemed to result in stronger detector signal than 660 Hz, from what I could tell ...</p>
<p>Meanwhile, the circuit I'm using to generate 7.5 volts is the first circuit <a href="https://www.instructables.com/Two-circuits-of-switched-mode-power-supply-based-o/">here</a></p>
<ul>
<li>Used LM358P for comparator</li>
<li>Used NE555 for 555</li>
<li>R1 is 10K</li>
<li>D1 is a 1N4727A ... the voltage drop across it seemed to be around 2.2 V</li>
<li>R6 is 10K (9.69K when measured)</li>
<li>R7 is 4.2K</li>
<li>replaced IRF29072 with IRF740</li>
<li>Remove D3 &amp; R9</li>
<li>Place C3, but might not need to populate</li>
<li>replaced DFLS220L with IN5817</li>
</ul>
<p>seemed to generate around 7.5 volts.  Might want to place an optional potentiometer to dial in the proper voltage ...</p>
<h1>Wed Jul  3 05:27:24 PM EDT 2024</h1>
<p>Reading about output filter design here: <a href="https://resources.altium.com/p/switching-power-supply-output-filter-design-and-simulationhttps://resources.altium.com/p/switching-power-supply-output-filter-design-and-simulation">https://resources.altium.com/p/switching-power-supply-output-filter-design-and-simulation</a></p>
<p>Added 10uF cap from 5V to GND, and added 50 uH inductor across 5V output ...</p>
<p>Switching 555 is running at 155 KHz</p>
<p>Current signal gen 555 output is at 880 Hz</p>
<p>Designing a snubber circuit for a buck IC: <a href="https://fscdn.rohm.com/en/products/databook/applinote/ic/power/switching_regulator/buck_snubber_app-e.pdf">https://fscdn.rohm.com/en/products/databook/applinote/ic/power/switching_regulator/buck_snubber_app-e.pdf</a></p>
<p>Minimizing ringing of a boost converter: <a href="https://www.ti.com/lit/an/slva255/slva255.pdf?ts=1720022648821">https://www.ti.com/lit/an/slva255/slva255.pdf?ts=1720022648821</a></p>
<p>Pi filter: <a href="https://diyguru.org/term/what-is-a-pi-filter/">https://diyguru.org/term/what-is-a-pi-filter/</a></p>
<p><img src="/img/uvf/555_footprint_size.png" alt=""></p>
<p>via <a href="https://www.ti.com/lit/ds/symlink/lm555.pdf?HQS=dis-dk-null-digikeymode-dsf-pf-null-wwe&amp;ts=1720046307239&amp;ref_url=https%253A%252F%252Fwww.ti.com%252Fgeneral%252Fdocs%252Fsuppproductinfo.tsp%253FdistId%253D10%2526gotoUrl%253Dhttps%253A%252F%252Fwww.ti.com%252Flit%252Fgpn%252Flm555">LM555 datasheet</a></p>
<p>SOIC-8 -- 4.90 mm × 3.91 mm</p>
<p>RC snubber around a Mosfet</p>
<h1>Fri Jul  5 06:07:37 PM EDT 2024</h1>
<p><img src="/img/uvf/instructable_boost.bmp" alt=""></p>
<p>What to do with unused op-amps <a href="https://e2e.ti.com/blogs_/archives/b/thesignal/posts/the-unused-op-amp-what-to-do">https://e2e.ti.com/blogs_/archives/b/thesignal/posts/the-unused-op-amp-what-to-do</a></p>
<p>Selecting the right comparator <a href="https://www.analog.com/en/resources/technical-articles/selecting-the-right-comparator.html">https://www.analog.com/en/resources/technical-articles/selecting-the-right-comparator.html</a></p>
<p>Reference around designing snubber circuits <a href="https://www.cde.com/resources/technical-papers/design.pdf">https://www.cde.com/resources/technical-papers/design.pdf</a></p>
<p>TL331IDBVR -- the single comparator version of the lm339 -- <a href="https://www.digikey.com/en/products/detail/texas-instruments/TL331IDBVR/381307">https://www.digikey.com/en/products/detail/texas-instruments/TL331IDBVR/381307</a></p>
<p>LMV331 also a possibility <a href="https://www.ti.com/lit/ds/symlink/lmv331-n.pdf?HQS=dis-dk-null-digikeymode-dsf-pf-null-wwe&amp;ts=1720219930696&amp;ref_url=https%253A%252F%252Fwww.ti.com%252Fgeneral%252Fdocs%252Fsuppproductinfo.tsp%253FdistId%253D10%2526gotoUrl%253Dhttps%253A%252F%252Fwww.ti.com%252Flit%252Fgpn%252Flmv331-n">https://www.ti.com/lit/ds/symlink/lmv331-n.pdf?HQS=dis-dk-null-digikeymode-dsf-pf-null-wwe&amp;ts=1720219930696&amp;ref_url=https%253A%252F%252Fwww.ti.com%252Fgeneral%252Fdocs%252Fsuppproductinfo.tsp%253FdistId%253D10%2526gotoUrl%253Dhttps%253A%252F%252Fwww.ti.com%252Flit%252Fgpn%252Flmv331-n</a></p>
<p><img src="/img/uvf/pi_filter.png" alt=""></p>
<p>Suggested power mosfet here: <a href="https://www.digikey.com/en/products/detail/diodes-incorporated/DMN61D9UWQ-13/7666847">https://www.digikey.com/en/products/detail/diodes-incorporated/DMN61D9UWQ-13/7666847</a></p>
<p>-- to be determined, as long as there's a proper footprint</p>
<p>going for this for now <a href="https://www.diodes.com/assets/Datasheets/DMN2056U.pdf">https://www.diodes.com/assets/Datasheets/DMN2056U.pdf</a> -- final is the DMN2056U</p>
<p><img src="/img/uvf/PI_FILTER.png" alt=""></p>
<p>QT-PY details <a href="https://learn.adafruit.com/adafruit-qt-py/downloads">https://learn.adafruit.com/adafruit-qt-py/downloads</a></p>
<p>test point <a href="https://www.digikey.com/en/products/detail/keystone-electronics/5001/255327">https://www.digikey.com/en/products/detail/keystone-electronics/5001/255327</a></p>


    </div>
  </body>
</html>
