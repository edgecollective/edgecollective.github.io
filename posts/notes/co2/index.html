

<!-- feed it through our cssmin filter to minify -->
<style>
  body{font-family:sans-serif;margin:20px;font-size:small;width:90%;margin-right:auto;margin-left:auto;padding-top:15px}#profile_pic{float:right;margin:0 0 1em 1em}h1{line-height:1em;font-size:x-large;margin-bottom:.31em}h2{font-size:large;margin-bottom:1px}h3{font-size:small;margin-bottom:1px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding-right:20px}.post .post-contents{background:#f7f7f7;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}.post .text{height:200px;padding:20px}@media (max-width:680px){.post{width:100%}}body{font:13px/1.5 Verdana,Helvetica,Arial,sans-serif;width:80%}.img-with-caption{font-size:14px;text-align:center;margin:20 0;background-color:F1F1F1;padding:10px}#pullout{text-align:center}#intro{max-width:700px;display:inline-block;text-align:left}#post-content{max-width:800px}#profile_pic{float:right;margin:0 0 1em 1em}h1{line-height:1em;font-size:x-large;margin-bottom:.31em}h2{font-size:large;margin-bottom:1px}h3{font-size:medium;margin-bottom:1px}ol,ul{max-width:650px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding:0 20px 20px 0}.contribute{width:100%;padding-top:10px}.post .post-contents{border-radius:10px;padding:20px 20px 10px 20px}.post .project-contents{background:#add8e6;border-radius:10px;padding:20px 20px 10px 20px}.post .podcast-contents{background:#e9967a;border-radius:10px;padding:20px 20px 10px 20px}.post .note-contents{background:#e6e6fa;border-radius:10px;padding:20px 20px 10px 20px}.post .pedagogy-contents{background:#90ee90;border-radius:10px;padding:20px 20px 10px 20px}.post .talk-contents{background:pink;border-radius:10px;padding:20px 20px 10px 20px}.post .inter-contents{background:#add8e6;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}img{max-height:500px;max-width:100%}table{margin:30 auto 30 auto;padding:10px;width:60%;text-align:left}td{padding:10px;text-align:left;font-size:12}.post .text{min-height:250px;padding:5px}.post .inter-text{height:250px}audio{width:100%;height:30px}@media (max-width:1100px){.post{width:100%}table{width:100%}}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/x-icon" href="/img/edge_favicon.png" />
    <title>Edge Collective</title>
  </head>
  <body>

    <div id='post-content'>

  <a href="/">Edge Collective</a>
        <h1>DIY CO2 Monitoring</h1>

  
  <h2>TODO</h2>
<p>14 OCT 2020</p>
<ul>
<li>set up / test heltec gateway again to send to FarmOS [X]</li>
<li>also send to custom server on DO;</li>
<li>get Z19 up and running [X]</li>
<li>turn off autocalibration on the Z19 []</li>
<li>turn off autocalibration on the K30 []</li>
</ul>
<h2>Table of contents</h2>
<p><a href="#feather">Feather Hookup Guide for K30</a></p>
<h2>Background</h2>
<p>Below is a development notebook for constructing a DIY CO2 monitor.</p>
<p>Click <a href="#gatewaysetup">here</a> to jump to the latest remote CO2 node + gateway setup.</p>
<h2>CO2METER.COM K30</h2>
<p><a href="https://www.co2meter.com/products/k-30-co2-sensor-module">Online description of K30</a></p>
<p><a href="http://co2meters.com/Documentation/Datasheets/DS_SE_0118_CM_0024_Revised9%20(1).pdf">K30 Datasheet</a></p>
<p>Needs 5V power minimum (actually, looks like it's best run at 6-9V); meanwhile, <strong>Logic levels for the UART are at 3.3V</strong>.</p>
<p>Useful info on logic levels / etc from the datasheet:</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/logic_levels.png"> <img src="/img/co2/logic_levels.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Table 1 from the <a href="http://co2meters.com/Documentation/Datasheets/DS_SE_0118_CM_0024_Revised9%20(1).pdf">K30 datasheet</a>.</td>
</tr>
</tbody>
</table>
<p>Meanwhile, though -- good advice on connecting to signals that run at higher voltage from JeeLab, <a href="https://jeelabs.org/2010/12/16/voltage-3-3-vs-5/index.html">here</a>.  Punchline -- can add a 1K resistor in series with signal as protection.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/fig2.png"> <img src="/img/co2/fig2.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Figure 2 from the <a href="http://co2meters.com/Documentation/Datasheets/DS_SE_0118_CM_0024_Revised9%20(1).pdf">K30 datasheet</a>.</td>
</tr>
</tbody>
</table>
<ul>
<li>'G0' -- GND</li>
<li>'G+' -- Voltage input (5V to 9V)</li>
<li>'TxD, RxD' -- UART</li>
<li>'OUT1' -- Analog output (alternative way of getting the data)</li>
</ul>
<p>Datasheet says: should avoid connecting analog and digital ground pins externally in order to avoid ground loops</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/analog_outputs.png"> <img src="/img/co2/analog_outputs.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Analog outputs.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/calibration.png"> <img src="/img/co2/calibration.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Calibration.</td>
</tr>
</tbody>
</table>
<h2>Connecting to an Arduino</h2>
<h3>Via I2C</h3>
<p><a href="http://www.co2meters.com/Documentation/AppNotes/AN102-K30-Sensor-Arduino-I2C.pdf">Connecting a K30 to an Arduino via I2C</a></p>
<p>This suggests using 6 to 9V input. (Might be good to upgrade the spec on the MCP1702 voltage reg so we can take &gt; 6V input on the Mothbot).  Needs to be able to provide 500mA.  So: direct from battery power is likely best.</p>
<h3>Notes on using a Feather</h3>
<p><a href="https://cdn-learn.adafruit.com/assets/assets/000/032/914/large1024/feather_schem.png?1465421956">Schematic</a> of the Feather M0 Lora.</p>
<p>Datasheet for the AP2112-3.3 voltage regulator used on the feather is <a href="https://www.diodes.com/assets/Datasheets/AP2112.pdf">here</a>.</p>
<p>From the AP2112K datasheet -- 6V max allowed on Feather:</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/feather_voltage_input.png"> <img src="/img/co2/feather_voltage_input.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">UART connection.</td>
</tr>
</tbody>
</table>
<h3>Via UART</h3>
<p>Note: <strong>Logic levels for the UART are at 3.3V</strong>.</p>
<p><a href="http://www.co2meters.com/Documentation/AppNotes/AN126-K3x-sensor-arduino-uart.pdf">Connecting a K30 to an Arduino via UART</a></p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/uart_closeup.png"> <img src="/img/co2/uart_closeup.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">UART connection.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/first_readings.png"> <img src="/img/co2/first_readings.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">First readings.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/breath_test.png"> <img src="/img/co2/breath_test.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Blowing on the sensor and then letting it recover.</td>
</tr>
</tbody>
</table>
<p>Edge Collective copy of the library for UART connection is <a href="https://github.com/edgecollective/co2-kseries">here</a> (replica of that provided by CO2 Monitor <a href="http://www.co2meters.com/Documentation/AppNotes/AN126-K3x-sensor-arduino-uart.zip">here</a>).</p>
<h2>SSD1306 Display</h2>
<p>Guide <a href="https://randomnerdtutorials.com/guide-for-oled-display-with-arduino/">here</a> for hookup to Arduino UNO.</p>
<h2>UART + SSD1306 Display</h2>
<p>Example code <a href="https://gist.github.com/dwblair/310acc6f8dafa8f82af713200ceda577">here</a>.</p>
<h2><a name="gatewaysetup"></a> Remote LoRa CO2 Node and Heltec Gateway sending to FarmOS</h2>
<p>Using a <a href="https://edgecollective.io/posts/notes/mothbot/">Mothbot</a> to connect to the K30 sensor over UART and send via LoRa to a <a href="https://www.amazon.com/MakerFocus-Development-Bluetooth-0-96inch-Display/dp/B076MSLFC9">Heltec</a> Wifi-LoRa gateway, posting to <a href="https://edgecollective.farmos.net/farm/sensor/heltecone">FarmOS</a>.</p>
<p>Code for remote and gateway is <a href="https://github.com/edgecollective/co2-remote-and-gateway">here</a>.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/remote_v1.jpg"> <img src="/img/co2/remote_v1.jpg" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Mothbot remote node connected to K30 CO2 sensor.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/mothbo.jpg"> <img src="/img/co2/mothbo.jpg" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Closeup of Mothbot.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/k30.jpg"> <img src="/img/co2/k30.jpg" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Closeup of K30 CO2 sensor.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/heltec_gateway.jpg"> <img src="/img/co2/heltec_gateway.jpg" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Heltec Wifi-LoRa gateway</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/farmos_graph.png"> <img src="/img/co2/farmos_graph.png" alt="fig2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Graphing on FarmOS</td>
</tr>
</tbody>
</table>
<h2>Misc</h2>
<p>Would be nice to develop useful ways of connecting to some standard hardware (e.g. Feathers, etc).</p>
<h2>CO2 and Greenhouses</h2>
<p><a href="https://www.greenhousegrower.com/production/monitoring-carbon-dioxide-in-the-greenhouse/">Article</a> on measuring CO2 in greenhouses:</p>
<blockquote>
<p>Until recently, the vast majority of growers in the U.S. did not measure CO2 or use it to enrich their greenhouses. However, during the winter, CO2 levels can quickly become limiting in unventilated greenhouses full of plants on cold and sunny days. Over the past 10 years, we have also seen greenhouse growers seal up their greenhouses in an effort to control their heating bills during the winter. Other growers, especially in northern latitudes, have invested in supplemental lighting because of the numerous benefits, from improved quality and yields to reduced production time. An apparent result of tightly sealing the greenhouse is increased humidity and condensation. A not-so-apparent result of reducing air infiltration is a reduction of CO2 levels within the greenhouse below ambient levels found outdoors.</p>
</blockquote>
<h2>Ongoing work / research</h2>
<hr>
<p>Oct 9 2020:</p>
<p>Maybe a good configuraiton is to have the sensor powered via a 7.4V rechargeable lith-ion, while the micro attached has its separate battery voltage?</p>
<hr>
<p>oct 13 2020:</p>
<p>Recreating the prototype but using a Feather M0 instead ...</p>
<p>now we want to use Hardware Serial instead of Software Serial ...</p>
<p>We noticed a <a href="https://twitter.com/linseymarr/status/1314582969168920577?s=20">Twitter thread</a> by Linsey Marr on Oct 8 2020 that references using a CO2 monitor to assess activity in a space re: COVID-19; they use the HOBO CO2 monitor pictured in Fig C below.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/hobo_c02.jpeg"> <img src="/img/co2/hobo_c02.jpeg" alt="figC"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fig C. HOBO CO2 Logger used to assess activity level / air turnover in a college gym.</td>
</tr>
</tbody>
</table>
<p>Note: some power options (if plugging into the wall):  use a 9V power wall wart, and drop down voltage to 5V; or use a 5V wall wart (more commong), and boost up to 9V.</p>
<p>If the latter, probably need to check on current (mA) requirements of the K30.</p>
<p>Offhand, seems like drop down is easier; boosting to 6V / 9V is a bit odd.</p>
<h3><a name="feather"></a>Feather Hookup Guide for K30</h3>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/feather_setup.jpg"> <img src="/img/co2/feather_setup.jpg" alt="figA2"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fig A2.  Feather M0 connected to a K30 sensor.</td>
</tr>
</tbody>
</table>
<p>Feather firmware is <a href="https://github.com/edgecollective/co2-remote-and-gateway/tree/master/v1/featherm0_K30">here</a>.</p>
<p>Wiring for test:</p>
<ul>
<li>Connect TXD (K30, see Fig A below) to RX0 (Feather);</li>
<li>Connect RXD (K30, see Fig A below) to TX1 (Feather);</li>
<li>Connect Feather GND to 6V Battery GND;</li>
<li>Connect 6V battery Power to Feather to K30 Power in (labeled &quot;5V&quot; in fig A below)</li>
<li>Power Feather via USB (for initial test)</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/uart_closeup.png"> <img src="/img/co2/uart_closeup.png" alt="figA"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fig A.  UART connection on the K30.  When connecting to the Feather, connect TXD (K30) to RX0 (Feather) and RXD (K30) to TX1 (Feather).</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/feather_co2_decay_test.png"> <img src="/img/co2/feather_co2_decay_test.png" alt="figB"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fig B.  Data from Feather, plotted in Arduino plotter utility.  Data shows breathing on sensor at a particular time and and watching decay. Time interval unit is 2 seconds.</td>
</tr>
</tbody>
</table>
<p>UPDATE: looks like the K30 can be powered by up to 14V.  So a 12V boost, or power supply, could be an option.</p>
<p>Started by closing door, sitting next to sensor.   At 150 time mark, opened door and left room.  Then At 250 time mark, reentered room and closed door. At 280 time mark, started a conversation.</p>
<p>Cf. 'room_test.png'.</p>
<p>'room_test_later.png' -- had a phone call</p>
<p>'room_test_later_2.png' -- left room for a bit with door open, then emilie came back and worked with the door open.</p>
<h2>Reference for typical / expected CO2 values</h2>
<p>Nice discussion <a href="https://inspectapedia.com/hazmat/CO2_Typical_Levels.php">here</a>, thanks to Laura P.</p>
<h2>Other CO2 Sensors</h2>
<h3>MH-Z14:</h3>
<p>Specifically mentions NDIR.</p>
<p>For sale on <a href="https://usa.banggood.com/NDIR-CO2-Sensor-MH-Z14A-PWM-NDIR-Infrared-Carbon-Dioxide-Sensor-Module-Serial-Port-0-5000PPM-Controller-p-1248270.html?utm_source=googleshopping&amp;utm_medium=cpc_organic&amp;gmcCountry=US&amp;utm_content=minha&amp;utm_campaign=minha-usg-pc&amp;currency=USD&amp;createTmp=1&amp;utm_source=googleshopping&amp;utm_medium=cpc_bgs&amp;utm_content=frank&amp;utm_campaign=frank-ssc-us-all-1108&amp;ad_id=395572890419&amp;cur_warehouse=CN">Banggood</a>.
Another option</p>
<h3>MH-Z19:</h3>
<p>Mentions infrared. This is the one that Craig used / that I have in my possession now.</p>
<p>For sale on <a href="https://usa.banggood.com/MH-Z19-MH-Z19B-Infrared-CO2-Sensor-Module-Carbon-Dioxide-Gas-Sensor-for-CO2-Monitor-0-5000ppm-MH-Z19B-NDIR-with-Pin-p-1693604.html">Banggood</a> for $20.</p>
<p>Goal as of 13 OCT 2020: get this up and running in parallel to the K30 and see how they compare with the 'ambient' test.</p>
<p>Nice <a href="https://www.circuits.dk/testing-mh-z19-ndir-co2-sensor-module/">article</a> on testing out the Z19 on a Raspberry Pi.</p>
<p>Update 15 OCT 2020: Just found a fairly official-looking Arduino library for the MH-Z19 <a href="https://github.com/WifWaf/MH-Z19">here</a> by WifWaf.</p>
<p>In that repo they have some nice notes about calibration.  The Z19 allows us to turn autocalibration off (which seems useful -- otherwise it is using the lowest reading in a 24 hour period as '400 ppm').  Would be good to experiment with this.</p>
<p>Also, here's <a href="https://github.com/tobiasschuerg/MH-Z-CO2-Sensors">another library for the MH-19</a> -- looks a bit older.  Going to try the WifWaf one above for now.</p>
<p>Note that the WifWaf github MH-Z19 lib is already in the Arduino online Lib repo, can just install via Library Manager in IDE.</p>
<p>Update 15 OCT 2020:  was able to get the WifWaf lib running on the MothbotV3.  Radiohead + the library ends up generating a 'low memory' warning.  This is fine; we'll likely end up using the Feather; also, we can pare down the full library to just generate raw values, likely.</p>
<h2>Programming the Heltec Gateway</h2>
<p><a href="https://randomnerdtutorials.com/installing-the-esp32-board-in-arduino-ide-windows-instructions/">Guide to using ESP32 in Arduino IDE</a></p>
<p><a href="https://github.com/espressif/arduino-esp32/blob/master/docs/arduino-ide/boards_manager.md">Another guide from Sparkfun</a></p>
<p>Add this to Boards Manager:</p>
<p><code>https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json</code></p>
<p>Select 'Heltec Wifi Lora (v2)'</p>
<h2>Programming with Feather</h2>
<p>Add this to Boards Manager:</p>
<p><code>https://adafruit.github.io/arduino-board-index/package_adafruit_index.json</code></p>
<h2><a name="co2_farmos_overnight"></a> CO2 with K30 to FarmOS</h2>
<p>Oct 14 2020</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a href="/img/co2/co2_farmos.png"> <img src="/img/co2/co2_farmos.png" alt="figB"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Posting CO2 PPM data from a K30 to FarmOS, measuring overnight from 14 OCT to 15 OCT 2020.</td>
</tr>
</tbody>
</table>
<h2>Turning off autocalibration in K30</h2>
<p><a href="http://www.yoctopuce.com/EN/article/how-to-calibrate-a-co2-sensor">This article</a> mentions a technique, using their library.</p>
<h2>CO2 with custom server</h2>
<p>(TODO: set up using chappy-server as a model?)</p>
<h2>Ongoing Work Log</h2>
<p>As Of 15 OCT 2020 10:42 AM -- K30 is autocalibrating, Z19 is not.</p>
<p>Ah -- looks like the K30 also can give temp, and RH!  Cf the example <a href="https://gist.github.com/pkourany/53415d7f0c354a6d1e05">here</a>.</p>
<p>How to read the K30 via I2c app note <a href="http://www.co2meters.com/Documentation/AppNotes/AN102-K30-Sensor-Arduino-I2C.pdf">here</a>.</p>
<p>Ahhh here is a library for multiple params by CO2meter for the K30 -- <a href="http://www.co2meters.com/Documentation/AppNotes/AN126-K3x-sensor-arduino-uart.pdf">boom</a>.</p>
<p>need to modify their library so that it doesn't rely on SoftwareSerial (necessarily)</p>
<p>-- but first check whether we can even disable autocalibration?</p>
<p>Reading the <a href="https://img.ozdisan.com/ETicaret_Dosya/456729_1584920.PDF">K30 datasheet</a></p>
<p>Useful CO2meter guide to K30 ABC <a href="https://www.co2meter.com/blogs/news/7512282-co2-sensor-calibration-what-you-need-to-know">here</a>.</p>
<p><a href="http://www.warf.com/download/3671_7081_I2C_comm_guide_2_1031.pdf">i2c communication guide to K series sensors</a></p>
<p>-- looks like it can be disabled in EEPROM via I2C, at least ...</p>
<p>Nice reference on connecting a Teensy to a K30 <a href="https://forum.pjrc.com/threads/23963-Teensy-3-0-and-co2-sensor-with-UART">here</a></p>
<p>Reference to a key application note re: K-Series eeprom setup <a href="https://www.co2meter.com/blogs/news/9278787-senseair-k-series-sensor-uart-eeprom-ram-access-procedure">here</a></p>
<p>-- need to email them, UART command lib is missing ...</p>
<p>15 OCT 14:00 -- Interesting link to the <a href="http://www.yoctopuce.com/EN/products/usb-environmental-sensors/yocto-co2-v2">Yoctopuce V2</a>, which uses a 'better sensor' than the K30, they claim ...</p>
<p>The K30-based yoctopuce-c02 is <a href="http://www.yoctopuce.com/EN/products/discontinued-products/yocto-co2">here</a></p>
<p>More about the yp-co2-v2 is <a href="https://www.yoctopuce.com/EN/article/new-the-yocto-co2-v2">here</a></p>
<p>Yp-co2 (K30) <a href="https://www.yoctopuce.com/EN/products/yocto-co2/doc/YCO2MK01.usermanual.html">user's guide</a></p>
<h2>K30 via i2c</h2>
<p>this is the serious guide, <a href="http://www.warf.com/download/3671_7081_I2C_comm_guide_2_1031.pdf">here</a></p>
<p>simple i2c example <a href="http://www.co2meters.com/Documentation/AppNotes/AN102-K30-Sensor-Arduino-I2C.pdf">here</a></p>
<h2>SCD30</h2>
<p>The yocto uses the SCD30 -- listed for $54 on <a href="https://www.digikey.com/en/products/detail/sensirion-ag/SCD30/8445334?utm_adgroup=Sensors%20%26%20Transducers&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=Dynamic%20Search&amp;utm_term=&amp;utm_content=Sensors%20%26%20Transducers&amp;gclid=CjwKCAjw5p_8BRBUEiwAPpJO63lPqw8gZyFFETPN5SMQElL0quJ5jvgLhi2gGq7jW4WlxdnqgtCC_xoCyLAQAvD_BwE">digikey</a></p>
<p>Here's the SCD30 <a href="https://cdn.sparkfun.com/assets/d/c/0/7/2/SCD30_Interface_Description.pdf">datasheet</a></p>
<p>Arduino library <a href="https://www.arduino.cc/reference/en/libraries/sparkfun-scd30-arduino-library/">here</a></p>
<p>And on <a href="https://github.com/sparkfun/SparkFun_SCD30_Arduino_Library">github</a></p>
<p>annnnd the Sparkfun library has a 'disable calibration' settting <a href="https://github.com/sparkfun/SparkFun_SCD30_Arduino_Library/tree/master/examples/Example4_DisableCalibrate">here</a></p>
<h2>Summary as of 15 OCt 2020 15:00</h2>
<p>K30 seems outdated; won't trust it until we figure out how to turn off the autocalibration ... waiting to hear back from CO2 meter</p>
<p>MH-Z19 is also a bit older;  can at least control the autocal ...</p>
<p>The calibration assumption with these meters seems to be that they use the lowest ppm value over some period and consider it to be 400 ppm -- assumes that all spaces end up getting 'fresh air' at some point in that period.  For the K30, this is et to 7 days.  Not sure for the other sensors.</p>
<p>Also: readings for NDIR are temp, humidity, and pressure dependent.  My sense is that all the sensors measure these variables and compensate; the SCD30 also allows for feeding it the current ambient pressure and using it for calibration.</p>
<p>My current thought is the SCD30 would be a good one to get, along with an ambient pressure sensor.</p>


    </div>
  </body>
</html>
