

<!-- feed it through our cssmin filter to minify -->
<style>
  body{font-family:sans-serif;margin:20px;font-size:small;width:90%;margin-right:auto;margin-left:auto;padding-top:15px}#profile_pic{float:right;margin:0 0 1em 1em}h1{line-height:1em;font-size:x-large;margin-bottom:.31em}h2{font-size:large;margin-bottom:1px}h3{font-size:small;margin-bottom:1px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding-right:20px}.post .post-contents{background:#f7f7f7;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}.post .text{height:200px;padding:20px}@media (max-width:680px){.post{width:100%}}body{font:13px/1.5 Verdana,Helvetica,Arial,sans-serif;width:80%}.img-with-caption{font-size:14px;text-align:center;margin:20 0;background-color:F1F1F1;padding:10px}#pullout{text-align:center}#intro{max-width:700px;display:inline-block;text-align:left}#post-content{max-width:800px}#profile_pic{float:right;margin:0 0 1em 1em}h1{line-height:1em;font-size:x-large;margin-bottom:.31em}h2{font-size:large;margin-bottom:1px}h3{font-size:medium;margin-bottom:1px}ol,ul{max-width:650px}a{text-decoration:none}a:hover{text-decoration:underline}a:visited{color:#00f}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.posts-area{width:100%;padding-top:10px}.posts-area:after{content:"";display:table;clear:both}.post{float:left;width:33.33%;padding:0 20px 20px 0}.contribute{width:100%;padding-top:10px}.post .post-contents{border-radius:10px;padding:20px 20px 10px 20px}.post .project-contents{background:#add8e6;border-radius:10px;padding:20px 20px 10px 20px}.post .podcast-contents{background:#e9967a;border-radius:10px;padding:20px 20px 10px 20px}.post .note-contents{background:#e6e6fa;border-radius:10px;padding:20px 20px 10px 20px}.post .pedagogy-contents{background:#90ee90;border-radius:10px;padding:20px 20px 10px 20px}.post .talk-contents{background:pink;border-radius:10px;padding:20px 20px 10px 20px}.post .inter-contents{background:#add8e6;border-radius:5px}.post .image a{display:block;overflow:hidden;height:214px}.post img{object-fit:cover;width:100%;height:100%}img{max-height:500px;max-width:100%}table{margin:30 auto 30 auto;padding:10px;width:80%;text-align:left;border:1px solid #000}td{padding:10px;text-align:left;font-size:12}.post .text{min-height:250px;padding:5px}.post .inter-text{height:250px}audio{width:100%;height:30px}@media (max-width:1100px){.post{width:100%}table{width:100%}}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/x-icon" href="/img/edge_favicon.png" />
    <title>Edge Collective</title>
  </head>
  <body>

    <div id='post-content'>

  <a href="/">Edge Collective</a>
        <h1>P2P / DIY Server</h1>

  
  <p>Repo is <a href="https://gitlab.com/dwblair/p2p-farm-server">here</a>.</p>
<p>A useful associted 'PUT' script is <a href="https://gist.github.com/dwblair/4cfbcc993fafcd4d984058ae730ee342">here</a></p>
<h2>ESP32 --&gt; Server</h2>
<p>Adding headers to esp32 explanation <a href="https://techtutorialsx.com/2018/01/03/esp32-arduino-basic-authentication/">here</a></p>
<p>Making a PUT request <a href="https://techtutorialsx.com/2019/01/07/esp32-arduino-http-put-request/">here</a>.</p>
<p>Using ArduinoJSON with HTTPClient <a href="https://arduinojson.org/v6/how-to/use-arduinojson-with-httpclient/">here</a>.</p>
<p>Creating nested json objects in ArduinoJSON <a href="https://arduinojson.org/v5/faq/how-to-create-complex-nested-objects/">here</a>.</p>
<h2>Work Log</h2>
<hr>
<p>21 OCT 2020</p>
<p>Fixed sqlite3 missing module.</p>
<p>Got an ESP32 to post data via JSON, <a href="https://github.com/edgecollective/esp32-p2p-farm/tree/main/test_put_json">here</a>.</p>
<hr>
<p>23 OCT 2020</p>
<p>Trying to use <a href="https://github.com/fastify/fastify-basic-auth">this fastify basic auth module</a> as part of the codebase.</p>
<p>... implemented!</p>
<hr>
<p>24 OCT 2020</p>
<p>Some next steps:</p>
<ul>
<li>Make a video explanation of the idea.</li>
<li>Work out the storage math, and the economics of storage space.</li>
<li>This might provide a motivation for using the hyper protocol!</li>
<li>Put demo code on the site for using Python, and ESP32, CircuitPy, curl to upload data.</li>
<li>Put it at EC subdomain, or something separate.</li>
<li>Add CSV export</li>
<li>Add JSON export (already there mostly)</li>
<li>Add simple graphing</li>
<li>Add simple metrics (size of file, timespan of datafile, num datapoints)</li>
<li>Add human-readable timestamp (at least e.g. in CSV export)</li>
</ul>
<hr>
<p>25 OCT 2020</p>
<p>Making a python PUT script.</p>
<p>Reference on python requests <a href="https://requests.readthedocs.io/en/master/user/authentication/">here</a>.</p>
<p>Setting the authorization header in curl <a href="https://stackoverflow.com/questions/3044315/how-to-set-the-authorization-header-using-curl">here</a>.</p>
<p>Issue: when using basic auth in current basicAuth branch, it is putting the username password authentication method on top of <em>every</em> request -- need to do it just for the home page.</p>
<p>Guide to using basic auth <a href="https://github.com/fastify/fastify-basic-auth">here</a>.</p>
<p>Combining fastify static with fastify basic auth <a href="https://github.com/fastify/help/issues/190">here</a>.</p>
<p>Using multiple authentication options with fastify <a href="https://github.com/fastify/fastify-auth#usage">here</a></p>
<p>addhook onresponse by route <a href="https://github.com/fastify/fastify/issues/1828">here</a></p>
<p>fastify and mongodb <a href="https://www.fastify.io/docs/v3.4.x/Getting-Started/">here</a></p>
<p>Might just need to find a way to serve up web page from directly in fastify, using basicAuthFix branch</p>
<p>Nice <a href="https://www.fastify.io/docs/v3.4.x/Getting-Started/">getting started with fastify</a> document.</p>
<p>Currently the action is in 'main.js' ...</p>
<p>Looks like there is a way to addHook to specific routes <a href="https://github.com/fastify/fastify/blob/master/docs/Hooks.md#onroute">here</a></p>
<p>latest idea:  keep basicAuth branch as-is, but use multiple authentication methods in 'PUT' script</p>
<p>'ctrl shift i' will insert timestamp in VS Code given installation of an extension <a href="https://stackoverflow.com/questions/38780057/how-to-insert-current-date-time-in-vscode#:~:text=To%20insert%20current%20date%20and,Insert%20DateTime%20then%20press%20Enter%20.&amp;text=By%20default%20you%20don't%20have%20to%20set%20anything.">here</a></p>
<p>Adding multiple authorization headers via postman <a href="https://stackoverflow.com/questions/29282578/multiple-http-authorization-headers">here</a></p>
<p>Combining multiple authorizations via curl <a href="https://stackoverflow.com/questions/22229996/basic-http-and-bearer-token-authentication">here</a></p>
<p>Setting multiple headers in curl -- useful! -- <a href="https://www.shellhacks.com/curl-add-header-multiple-headers-authorization/">here</a></p>
<p>issues:</p>
<ol>
<li>can't use multiple authorization schemes, in particular not if one of them is Basic Auth</li>
<li>not sure how to combine basic auth with fastify-static</li>
</ol>
<p>interesting angle mentioned in <a href="https://stackoverflow.com/questions/64201513/transform-response-of-fastify-static-served-files">&quot;Transform response of fastify-static served files&quot;</a>, which led to fastify <a href="https://github.com/fastify/point-of-view">point-of-view templates idea</a>.</p>
<p>Ah -- I think I've got it working with the basicAuth branch, now!</p>
<hr>
<p>2020-11-29 08:51:40</p>
<p>Adding authentication to NodeJS, <a href="https://www.youtube.com/watch?v=Ud5xKCYQTjM">here</a></p>
<p>Using Auth0 and Fastify <a href="https://medium.com/better-programming/how-to-add-authentication-to-your-fastify-rest-api-using-auth0-cddc7eacc90">here</a> -- ah, blocked --</p>
<p>But there's a repo, <a href="https://github.com/nearform/fastify-auth0-verify">here</a>.</p>
<hr>
<p>2020-11-29 16:43:16</p>
<p><a href="https://blog.jupyter.org/a-gallery-of-voil%C3%A0-examples-a2ce7ef99130">Jupyter dashboard</a> via voila -- <a href="https://blog.jupyter.org/a-gallery-of-voil%C3%A0-examples-a2ce7ef99130">gallery of examples</a></p>
<p>gesis notebooks, <a href="https://notebooks.gesis.org/">here</a></p>
<p>guide to voila, <a href="https://analyticsindiamag.com/complete-guide-to-voila-to-turn-a-jupyter-notebook-into-a-standalone-web-application/">here</a></p>
<p>Dashboarding options in Jupyter discussed <a href="https://medium.com/informatics-lab/jupyter-dashboarding-some-thoughts-on-voila-panel-and-dash-b84df9c9482f">here</a></p>
<p>User authentication with nodejs and passport <a href="https://www.freecodecamp.org/news/learn-how-to-handle-authentication-with-node-using-passport-js-4a56ed18e81e/">here</a></p>
<p>Rolling your own authentication, <a href="https://developer.okta.com/blog/2019/10/03/painless-node-authentication">here</a>.</p>
<p>React and Auth0 ...</p>
<ul>
<li><a href="https://www.smashingmagazine.com/2020/11/authenticating-react-apps-auth0/">Third party guide here</a>
and</li>
<li><a href="https://auth0.com/blog/complete-guide-to-react-user-authentication/">Auth0 guide here</a></li>
</ul>
<hr>
<p>2020-12-05 14:21:37</p>
<h2>Node + Express + Postgresql</h2>
<p><a href="https://blog.logrocket.com/getting-started-with-postgres-in-your-react-app/">react + node + express + postgresql</a> -- short tutorial</p>
<p><a href="https://bezkoder.com/react-node-express-postgresql/">react + node + express + postgresql</a> -- thorough tutorial</p>
<p><a href="https://expressjs.com/en/guide/database-integration.html#postgresql">express + postgresql</a> -- from node guide</p>
<p><a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">Creating a web application in your home with a Raspberry Pi, Express and PostgreSQL</a> -- this looks like a great place to begin!</p>
<p><a href="https://medium.com/@timtamimi/getting-started-with-authentication-in-node-js-with-passport-and-postgresql-2219664b568c">Getting started with authentication in Node.js with Passport and PostgresQL</a></p>
<p><a href="https://sequelize.org/">Sequelize</a> -- JSON that creates a database table</p>
<p><a href="https://stackoverflow.com/questions/43436755/best-way-to-save-data-that-keeps-coming-every-1-second-to-postgres-using-node-js">suggestion to use multi-row inserts to save time</a></p>
<p><a href="https://mherman.org/blog/designing-a-restful-api-with-node-and-postgres/">designing a restful api with node and postgres</a></p>
<p><a href="https://rike.dev/2019/04/20/setup-postgresql-database-and-api-for-node-js">ahhh -- part of a great series that seems to do all the things!  including graphing!</a> -- the series is <a href="https://rike.dev/2019/02/11/smart-home-setup-to-track-indoor-temperatures-and-humidity-with-sensors-raspberry-pi-mqtt-node-js-vue-js-and-chart-js">here</a></p>
<p><a href="https://www.mathworks.com/help/thingspeak/choose-between-rest-and-mqtt.html#:~:text=REST%20is%20a%20representational%20state,can%20be%20secured%20with%20SSL.">using mqtt vs REST</a></p>
<hr>
<p>2020-12-05 20:47:42</p>
<p>following tutorial <a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">here</a>, putting in Documents/able</p>
<blockquote>
<p>sudo apt-get install postgresql</p>
</blockquote>
<p>psuser
psps</p>
<blockquote>
<p>sensor2=# INSERT INTO users (username, password) VALUES ('user1', 'bubbles');</p>
</blockquote>
<blockquote>
<p>INSERT INTO sensors (name) values ('NodeMCU  ESP32');</p>
</blockquote>
<hr>
<p>2020-12-15 08:53:18</p>
<p><a href="https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-postgresql-db-and-jwt-3-mke10c5c5">Building a simple API with Nodejs, Expressjs, PostgreSQL DB, and JWT - 3</a></p>
<p><a href="https://blog.logrocket.com/setting-up-a-restful-api-with-node-js-and-postgresql-d96d6fc892d8/">node + postgresql -- nice tutorial</a></p>
<p><a href="https://itnext.io/building-restful-api-with-node-js-express-js-and-postgresql-the-right-way-b2e718ad1c66">node + postgresql + jwt</a></p>
<hr>
<p>2020-12-15 15:12:26</p>
<p>Begin here:</p>
<ul>
<li><a href="https://bezkoder.com/node-express-sequelize-postgresql/">CRUD</a></li>
</ul>
<p>then add security here:</p>
<ul>
<li><a href="https://bezkoder.com/node-js-jwt-authentication-postgresql/">adding jwt</a></li>
</ul>
<p>Update: actually, begin with second tutorial ...</p>
<p>Installing postgresql on ubuntu <a href="https://www.digitalocean.com/community/tutorials/how-to-install-postgresql-on-ubuntu-20-04-quickstart">here</a></p>
<p>React + node + express + mongo w/ login page <a href="https://bezkoder.com/react-node-mongodb-auth/">here</a></p>
<hr>
<p>2020-12-15 15:53:43</p>
<p>Okay, here's the real deal:</p>
<p><a href="https://bezkoder.com/node-express-sequelize-postgresql/">Node.js Express &amp; PostgreSQL: CRUD Rest APIs example with Sequelize</a></p>
<p>Prior exapmel:</p>
<p>node, express, postgresql using sequelize <a href="https://medium.com/codingtown/node-express-and-postgresql-using-sequelize-in-ubuntu-18-04-3-lts-bc8d2cde3796">here</a></p>
<p>Wow, really simple example <a href="https://rike.dev/2019/04/20/setup-postgresql-database-and-api-for-node-js">here</a></p>
<p>postgres and ubuntu tutorial <a href="https://itsfoss.com/install-postgresql-ubuntu/">here</a></p>
<hr>
<p>2020-12-15 17:12:48</p>
<p>nodejs express mongodb jwt <a href="https://www.npmjs.com/package/node-express-mongodb-jwt-rest-api-skeleton">here</a></p>
<hr>
<p>2020-12-16 11:26:24</p>
<p>as another approach w/ node + postgres, trying out <a href="https://rike.dev/2019/04/20/setup-postgresql-database-and-api-for-node-js">this tutorial</a></p>
<p>Nice intro tutorial on nodejs and postgres <a href="https://stackabuse.com/using-postgresql-with-nodejs-and-node-postgres/">here</a></p>
<p>try out the github code <a href="https://github.com/jkasun/sa-node-postgres">here</a></p>
<p>worked.</p>
<p>New homework!  This is the thing to try:</p>
<p>&quot;creating a web application in your home using nodes, rpi, express, postgresql&quot; -- <a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">here</a></p>
<p>NOTE:  'createdb -0 username dbname' should have -O instead of -0</p>
<p>Associated github repo is <a href="https://github.com/RhettTrickett/habitat">here</a></p>
<p>Grand. And then can add users / JWT with something like <a href="https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-postgresql-db-and-jwt-3-mke10c5c5">this post</a></p>
<p>The first post for that series is <a href="https://www.codementor.io/@olawalealadeusi896/building-simple-api-with-es6-krn8xx3k6">here</a></p>
<p>Full code for the latter is <a href="https://github.com/olawalejarvis/reflection_app_server">here</a></p>
<p>And perhaps this shows how to combine the above with a front end -- <a href="https://bezkoder.com/react-express-authentication-jwt/">here</a></p>
<h3>Good example!</h3>
<p>The following pairing of backend and frontend seems to work as a baseline structure. Running both, they even find one another on the proper ports.</p>
<h4>Backend w/ node + express + postgresql + JWT</h4>
<p>Tutorial <a href="https://bezkoder.com/node-js-jwt-authentication-postgresql/">here</a> with associated code on github <a href="https://github.com/bezkoder/node-js-jwt-authentication-postgresql">here</a></p>
<h4>Frontend</h4>
<p>React front end <a href="https://bezkoder.com/react-jwt-auth/">here</a>, with github repo <a href="https://github.com/bezkoder/react-jwt-auth">here</a></p>
<h2>Node + Express + Postgres + Sequelize</h2>
<p>Tutorial <a href="https://www.robinwieruch.de/postgres-express-setup-tutorial">here</a>.  Nice explanation.</p>
<p>Another nice tutorial <a href="https://www.djamware.com/post/5b56a6cc80aca707dd4f65a9/nodejs-expressjs-sequelizejs-and-postgresql-restful-api">here</a>, with associated code on github <a href="https://github.com/didinj/node-express-postgresql-sequelize.git">here</a></p>
<p>Ahhhh, really nice tutorial on using sequelize, <a href="https://blog.echobind.com/a-guide-for-restful-apis-with-node-sequelize-postgres-63636d026d5d">here</a></p>
<hr>
<p>2020-12-16 13:31:56</p>
<p>using quasar, vue, and chartjs <a href="https://rike.dev/2019/02/11/display-smart-home-data-in-a-quasar-vue-js-and-chart-js-powered-web-application">here</a></p>
<hr>
<h2>Key links</h2>
<p>https://scotch.io/tutorials/getting-started-with-node-express-and-postgres-using-sequelize#toc-sequelize-setup</p>
<p>https://bezkoder.com/node-js-jwt-authentication-postgresql/</p>
<p>https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-and-postgresql-db-masuu56t7</p>
<hr>
<p>2020-12-17 08:04:23</p>
<p>arg for postgresql for iot <a href="https://blog.timescale.com/blog/choose-postgresql-for-iot-19688efc60ca/">here</a></p>
<hr>
<h3>(HICCUP IN NOTES FLOW)</h3>
<hr>
<p>2020-12-15 17:31:58</p>
<p><a href="https://www.digitaljunky.io/make-your-own-data-platform-for-the-internet-of-things-using-node-js-and-express-js/">make your own iot data platform</a></p>
<p>mern stack <a href="https://www.digitalocean.com/community/tutorials/getting-started-with-the-mern-stack">here</a></p>
<p>mean stack jwt <a href="https://www.youtube.com/watch?v=T8qepiTbJi4">here</a></p>
<p>MERN full stack <a href="https://github.com/praveenscience/JWT-MERN-FullStack">here</a></p>
<p>ooooooh this is good MERN! <a href="https://github.com/praveenscience/JWT-MERN-FullStack">here</a></p>
<p>another good example <a href="https://github.com/vishalnagda1/mern-jwt-auth">here</a></p>
<p>this worked!</p>
<p>https://github.com/vishalnagda1/mern-jwt-auth</p>
<p>broader tutorial on MERN <a href="https://codingthesmartway.com/the-mern-stack-tutorial-building-a-react-crud-application-from-start-to-finish-part-1/">here</a></p>
<p>MERN CRUD app tutorial <a href="https://github.com/SinghDigamber/react-mernstack-crud">here</a></p>
<p>this looks like a nice example, using postgres -- <a href="https://github.com/adrach/starter-postgres-express-react">here</a></p>
<hr>
<p>MERN:</p>
<p>okay so this tutorial lets you create student records and view them -- <a href="https://github.com/SinghDigamber/react-mernstack-crud">here</a></p>
<p>whereas <a href="https://github.com/vishalnagda1/mern-jwt-auth">this tutorial</a> does user login stuff.</p>
<hr>
<p>2020-12-15 20:59:54</p>
<p>this pair of server (node + mongo + jwt) + client (angular) worked:</p>
<ul>
<li>server <a href="https://jasonwatmore.com/post/2020/06/17/nodejs-mongodb-api-jwt-authentication-with-refresh-tokens">tutorial</a> and <a href="https://github.com/cornflourblue/node-mongo-jwt-refresh-tokens-api">code</a></li>
<li>client <a href="https://github.com/cornflourblue/angular-9-jwt-refresh-tokens">tutorial</a> and <a href="https://github.com/cornflourblue/angular-9-jwt-refresh-tokens">code</a></li>
</ul>
<p>reading about fastify <a href="https://medium.com/@tarusharora/how-to-build-a-node-js-api-with-fastify-mongodb-docker-and-postman-f1ffab912ece">here</a></p>
<hr>
<p>2020-12-16 09:25:10</p>
<p>this might be my starting place -- node express postgresql ubuntu <a href="https://medium.com/codingtown/node-express-and-postgresql-using-sequelize-in-ubuntu-18-04-3-lts-bc8d2cde3796">here</a></p>
<p>also see post <a href="https://scotch.io/tutorials/getting-started-with-node-express-and-postgres-using-sequelize">here</a></p>
<p>doing this in ~/Documents/postgres-express-react-node-tutorial</p>
<p>notes on postgres and user auth <a href="https://stackoverflow.com/questions/11919391/postgresql-error-fatal-role-username-does-not-exist">here</a></p>
<p>used this technique to change postgres password to 'i8buddha':
linked <a href="https://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install">here</a></p>
<p>sequelize import is not a function' -- https://stackoverflow.com/questions/62917111/sequelize-import-is-not-a-function</p>
<p>associated github repo is <a href="https://github.com/waiyaki/postgres-express-node-tutorial">here</a></p>
<hr>
<p>2020-12-16 10:16:16</p>
<p>In the end, a nice codebase for postgres express and node is <a href="https://scotch.io/tutorials/getting-started-with-node-express-and-postgres-using-sequelize#toc-sequelize-setup">here</a>.  Note that this blog post is based on an earlier blog post by Michael Herman, <a href="https://mherman.org/blog/node-postgres-sequelize/">here</a>.</p>
<p>with the github repo <a href="https://github.com/waiyaki/postgres-express-node-tutorial">here</a></p>
<p>used this technique to change postgres password to 'i8buddha':
linked <a href="https://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install">here</a></p>
<p>which needed to be changed in server/config/config.json as per:</p>
<p>{
&quot;development&quot;: {
&quot;username&quot;: &quot;postgres&quot;,
&quot;password&quot;: &quot;i8buddha&quot;,
&quot;database&quot;: &quot;todos-dev&quot;,
&quot;host&quot;: &quot;127.0.0.1&quot;,
&quot;port&quot;: 5432,
&quot;dialect&quot;: &quot;postgres&quot;
},
&quot;test&quot;: {
&quot;username&quot;: &quot;postgres&quot;,
&quot;password&quot;: &quot;i8buddha&quot;,
&quot;database&quot;: &quot;todos-test&quot;,
&quot;host&quot;: &quot;127.0.0.1&quot;,
&quot;port&quot;: 5432,
&quot;dialect&quot;: &quot;postgres&quot;
}
}</p>
<p>this was the only change needed in the github repo above.</p>
<p>clone, then install with npm install, and run with npm run start:dev</p>
<p>result: working todo api w/ sequelize.</p>
<hr>
<p>2020-12-16 11:26:24</p>
<p>as another approach w/ node + postgres, trying out <a href="https://rike.dev/2019/04/20/setup-postgresql-database-and-api-for-node-js">this tutorial</a></p>
<p>Nice intro tutorial on nodejs and postgres <a href="https://stackabuse.com/using-postgresql-with-nodejs-and-node-postgres/">here</a></p>
<p>try out the github code <a href="https://github.com/jkasun/sa-node-postgres">here</a></p>
<p>worked.</p>
<p>New homework!  This is the thing to try:</p>
<p>&quot;creating a web application in your home using nodes, rpi, express, postgresql&quot; -- <a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">here</a></p>
<p>NOTE:  'createdb -0 username dbname' should have -O instead of -0</p>
<p>Associated github repo is <a href="https://github.com/RhettTrickett/habitat">here</a></p>
<p>Grand. And then can add users / JWT with something like <a href="https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-postgresql-db-and-jwt-3-mke10c5c5">this post</a></p>
<p>The first post for that series is <a href="https://www.codementor.io/@olawalealadeusi896/building-simple-api-with-es6-krn8xx3k6">here</a></p>
<p>Full code for the latter is <a href="https://github.com/olawalejarvis/reflection_app_server">here</a></p>
<p>And perhaps this shows how to combine the above with a front end -- <a href="https://bezkoder.com/react-express-authentication-jwt/">here</a></p>
<h3>Good example!</h3>
<p>The following pairing of backend and frontend seems to work as a baseline structure. Running both, they even find one another on the proper ports.</p>
<h4>Backend w/ node + express + postgresql + JWT</h4>
<p>Tutorial <a href="https://bezkoder.com/node-js-jwt-authentication-postgresql/">here</a> with associated code on github <a href="https://github.com/bezkoder/node-js-jwt-authentication-postgresql">here</a></p>
<h4>Frontend</h4>
<p>React front end <a href="https://bezkoder.com/react-jwt-auth/">here</a>, with github repo <a href="https://github.com/bezkoder/react-jwt-auth">here</a></p>
<h2>Node + Express + Postgres + Sequelize</h2>
<p>Tutorial <a href="https://www.robinwieruch.de/postgres-express-setup-tutorial">here</a>.  Nice explanation.</p>
<p>Another nice tutorial <a href="https://www.djamware.com/post/5b56a6cc80aca707dd4f65a9/nodejs-expressjs-sequelizejs-and-postgresql-restful-api">here</a>, with associated code on github <a href="https://github.com/didinj/node-express-postgresql-sequelize.git">here</a></p>
<p>Ahhhh, really nice tutorial on using sequelize, <a href="https://blog.echobind.com/a-guide-for-restful-apis-with-node-sequelize-postgres-63636d026d5d">here</a></p>
<hr>
<p>2020-12-16 13:02:19</p>
<p>ingesting real time data w/ nodejs and timescale db <a href="https://stephanefrechette.dev/posts/ingest-real-time-streaming-data-for-time-series-analysis/">here</a></p>
<p>rike in berlin <a href="https://dev.to/frankanka">here</a></p>
<p>getting a csv download from nodejs <a href="https://dev.to/frankanka/get-a-csv-download-out-of-postgresql-or-lowdb-database-on-node-js-45k2">here</a></p>
<p>rike -- project -- maybe she'd help with corona -- <a href="https://rike.dev/">here</a></p>
<hr>
<p>multiple users and reflections <a href="https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-postgresql-db-and-jwt-3-mke10c5c5">here</a></p>
<p>this is a meaty post <a href="https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-and-postgresql-db-masuu56t7">here</a></p>
<h2>Key links</h2>
<p>https://scotch.io/tutorials/getting-started-with-node-express-and-postgres-using-sequelize#toc-sequelize-setup</p>
<p>https://bezkoder.com/node-js-jwt-authentication-postgresql/</p>
<p>https://www.codementor.io/@olawalealadeusi896/building-a-simple-api-with-nodejs-expressjs-and-postgresql-db-masuu56t7</p>
<p>this adds content to the node + express + postgres + sequelize <a href="https://bezkoder.com/node-express-sequelize-postgresql/">here</a> w/ associated github repo <a href="https://github.com/bezkoder/node-express-sequelize-postgresql">here</a></p>
<p>follow this first!<br>
and see if you can make it appropriate for sensors ...</p>
<p>and maybe if you can do a front end for it ...
looks like they do have a front end in React example at the end <a href="https://bezkoder.com/react-node-express-postgresql/">here</a> -- w/ associated github repo <a href="https://github.com/bezkoder/react-crud-web-api">here</a></p>
<p>NOTE: have changed default port to something other than 8080, should go back to that ...</p>
<p>so, plan of attack:</p>
<ol>
<li>return to that <a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">.bio tutorial</a> on sensors, and see how they set up the tables.  use that as an inspiration for how to create the postgresql table structure.</li>
<li>figure out best next thing to implement above; 'todo' or 'tutorials' examples; with or without jwt</li>
<li>add jwt + users using the other tutorial.</li>
</ol>
<p>postgres tutorial <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04">here</a></p>
<pre><code>sudo -i -u postgres
</code></pre>
<p>psql</p>
<p>\q</p>
<hr>
<p>2020-12-16 21:08:14</p>
<p>next steps:</p>
<ul>
<li>try to 'sequelize' the .bio example above, in order to understand how sequelize works ...</li>
<li>send sensor data to it</li>
<li>build it out like the 'tutorials' codebase that was associated with a react frontend</li>
<li>find a way to add JWT</li>
</ul>
<p>latest running code experimented with was <a href="node-js-jwt-authentication-postgresql">here</a>.</p>
<p>going to experiment with the '.bio' code asap.</p>
<p><a href="https://able.bio/rhett/creating-a-web-application-in-your-home-with-a-raspberry-pi-express-and-postgresql--3c90a372">.bio tutorial</a></p>
<p>creating new tables</p>
<p>CREATE TABLE users (
user_id SERIAL PRIMARY KEY,
username VARCHAR(50),
password VARCHAR(255),
is_admin BOOLEAN DEFAULT FALSE
);</p>
<p>CREATE TABLE measurements(
id SERIAL PRIMARY KEY,
feed_id INT,
celcius FLOAT,
humidity FLOAT,
created TIMESTAMP DEFAULT NOW(),
CONSTRAINT feed
FOREIGN KEY(feed_id)
REFERENCES feeds(feed_id)
);</p>
<p>CREATE TABLE measurements(
id SERIAL PRIMARY KEY,
feed_id INT,
celcius FLOAT,
humidity FLOAT,
created TIMESTAMP DEFAULT NOW(),
CONSTRAINT feed
FOREIGN KEY(feed_id)
REFERENCES feeds(feed_id)
);</p>
<p>INSERT INTO users (username, password) VALUES ('bob', 'jones');</p>
<p>INSERT INTO feeds (name) values ('NodeMCU  ESP32');</p>


    </div>
  </body>
</html>
